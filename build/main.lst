     1                                  ; x86_64 Intel Assembly
     2                                  
     3                                  ; %include "include/math.inc"
     4                                  ; %include "include/debug.inc"
     5                                  ; %include "include/lib.inc"
     6                                  
     7                                  section .data
     8 00000000 25640A                          dec_fm: db "%d", 0x0a
     9                                  section .bss
    10                                  section .text
    11                                          extern printf
    12                                          extern scanf
    13                                  
    14                                  global make_array_db
    15                                  make_array_db:  ; rdi: address, rsi: length, rdx: fill value
    16 00000000 55                              push rbp
    17 00000001 4889E5                          mov rbp, rsp
    18                                  
    19 00000004 EB06                            jmp .cnd
    20                                  .lp:    
    21 00000006 83EE01                          sub esi, 1
    22 00000009 8934B7                          mov dword [rdi+4*rsi], esi
    23                                  .cnd:
    24 0000000C 85F6                            test esi, esi
    25 0000000E 75F6                            jnz .lp
    26                                  
    27 00000010 5D                              pop rbp
    28 00000011 C3                              ret
    29                                  
    30                                  global main
    31                                  main:
    32 00000012 55                              push rbp
    33 00000013 4889E5                          mov rbp, rsp
    34                                  
    35 00000016 488D7D9C                        lea rdi, dword [rbp-100]
    36 0000001A BE19000000                      mov esi, 25
    37 0000001F BA6F000000                      mov edx, 111
    38 00000024 E8D7FFFFFF                      call make_array_db
    39                                  
    40                                  ;         mov ecx, 25
    41                                  ;         lea rax, dword [rbp-100]
    42                                  ;         jmp .cnd
    43                                  ; .lp:
    44                                  ;         sub ecx, 1
    45                                  ;         mov dword [rax+4*rcx], 72
    46                                  ; .cnd:
    47                                  ;         test ecx, ecx
    48                                  ;         jnz .lp
    49                                  
    50 00000029 488D45FC                        lea rax, dword [rbp-4]
    51 0000002D 488D3C25[00000000]              lea rdi, [dec_fm]
    52 00000035 4889C6                          mov rsi, rax
    53 00000038 E8(00000000)                    call printf
    54                                  
    55 0000003D 5D                              pop rbp
    56 0000003E B83C000000                      mov rax, 60
    57 00000043 4889F7                          mov rdi, rsi
    58 00000046 0F05                            syscall
